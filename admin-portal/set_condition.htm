<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation_Skin_SnowDocs" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="Admin Portal|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-conditions="General.NotForSPBuildHelp" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <meta http-equiv="Content-Style-Type" content="text/css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" /><title>Make Workflow Steps Conditional</title>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <meta charset="utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Styles.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/fontAwesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/roboto.font.css" rel="stylesheet" type="text/css" />
        <style>*
{
	box-sizing: border-box;
}

/* Create two columns that float next to each other */

.column
{
	
}

.column2
{
	
}

/* Clear floats after the columns */

.row:after
{
	content: "";
	display: table;
	clear: both;
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.next-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <link href="../Resources/TableStyles/Standard.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-L05Y74KND5" async="async">
        </script>
        <script>/*<![CDATA[*/  window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

		gtag('config', 'G-L05Y74KND5');/*]]>*/</script>
        <script defer="defer" src="../Resources/Scripts/scroll_to_top_left_nav.js" type="text/javascript">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" aria-label="title tab bar" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 900px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://docs.snowsoftware.io" title="Docs Portal Home" alt="Docs Portal Home"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="All Commander Docs" title="All Commander Docs" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Commander Docs</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div style="width: 100%; overflow: hidden;">
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_SnowDocs_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column"> <div role="main" id="mc-main-content"><h1 id="MakeWorkflowStepsConditional" data-magellan-target="MakeWorkflowStepsConditional"><a name="aanchor85"></a><MadCap:concept term="Admin Portal" />Make Workflow Steps Conditional</h1><p>You can specify that workflow steps are executed only when specified conditions are met. Setting conditions can help you:</p><ul><li>Make a workflow more flexible — for example, you could install an anti-virus program only on Windows VMs.</li><li>Add an extra level of approval to a workflow — for example, you could require a two-stage approval if the user requests resource changes.</li><li>Simplify the approval process — for example, you could create an approval workflow that will trigger the approval process only if the monthly cost of the request is greater than a specified amount. If the amount is lower than what you specify, the approval workflow will run, but no approval emails will be sent, and the request will move to the Approved state.</li></ul><h2 id="Defineconditionalexpressions" data-magellan-target="Defineconditionalexpressions"><a name="operators"></a><a name="table_operators"></a>Define conditional expressions</h2><p>To set a condition, you must define a valid expression that's composed with a combination of the following elements:</p><ul><li>Variables — Predefined expressions that reference Commander metadata. For a list of the available variables, see <a href="variables-reference.htm" class="MCXref xref">Variables Reference</a>.</li><li>Operators — Symbols that indicate the mathematical, relational, or logical operations to perform in the expression. The operators must be lower case. See <a href="#operators" class="MCXref xref">Define conditional expressions</a>.<div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">Available Operators</a></span><div class="MCDropDownBody dropDownBody"><table style="mc-table-style: url('../Resources/TableStyles/Standard.css');width: auto;" class="TableStyle-Standard" cellspacing="0"><col class="TableStyle-Standard-Column-Regular" /><col class="TableStyle-Standard-Column-Regular" /><thead><tr class="TableStyle-Standard-Head-Header1"><th class="TableStyle-Standard-HeadE-Regular-Header1"><p>Operator</p></th><th class="TableStyle-Standard-HeadD-Regular-Header1"><p>Description</p></th></tr></thead><tbody><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-eq</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>equals</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-ne</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>not equals</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-gt</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>greater than</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-ge</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>greater than or equals
                            </p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-lt</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>less than</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-le</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>less than or equals</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-contains</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>contains</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-notcontains</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>doesn't contain</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-and</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>Boolean operator; combines two conditions and requires both of them to be true</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyE-Regular-Row1"><p class="code">-or</p></td><td class="TableStyle-Standard-BodyD-Regular-Row1"><p>Boolean operator; combines two conditions and requires at least one of them to be true</p></td></tr><tr class="TableStyle-Standard-Body-Row1"><td class="TableStyle-Standard-BodyB-Regular-Row1"><p class="code">-not</p></td><td class="TableStyle-Standard-BodyA-Regular-Row1"><p>Boolean operator; negates a condition</p></td></tr></tbody></table></div></div></li><li>Constants — The constants can be numbers, Booleans, or strings.</li></ul><p class="Note">The workflow type determines what variables you can use. For more information, see <a href="variables.htm" class="MCXref xref">Add Data to Workflows With Variables</a>.</p><h2 id="Syntaxrules" data-magellan-target="Syntaxrules"><a name="syntax"></a>Syntax rules</h2><p>Commander uses the following syntax rules for conditional expressions.</p><p class="Note">These syntax rules apply to both conditional workflow steps and conditional change requests. For more information, see <a href="make-change-requests-conditional.htm" class="MCXref xref">Make Change Requests Conditional</a>.</p><ul><li>Invalid conditions are evaluated to false.</li><li>You must enclose each variable in quotation marks.</li><li>When using Boolean operators, you must enclose each condition in parentheses. For example:
            
                <pre>("#{target.state}" -eq running) -and ("#{target.cloudAccount.type}" -eq amazon_aws)</pre></li><li>Parameters with spaces must be enclosed in double quotation marks. For example:
           
                <pre xml:space="preserve">"2019/03/12 08:30"</pre></li><li>Because conditions are parsed after variable substitution has occurred, if a variable value will contain spaces, the entire variable must be enclosed in double quotation marks. For example:
            
                <pre>"#{request.requestedServices[1].components[1].description}"</pre></li><li>Escaping of characters isn't supported. Escape characters are passed as is.</li><li>An empty string "" is used to indicate null or not set.</li><li>If a variable can be resolved as a number, a Boolean entity, or a date, it will be treated as such; otherwise it will be interpreted as a string.
           
                <ul><li>Number: A positive and negative floating point number or integer</li><li>Boolean: True or false, case-insensitive</li><li>Date: YYYY/MM/DD hh:mm:ss</li></ul></li><li>A variable will be resolved as a date if it matches one of these patterns:
            
                <p>YYYY/MM/DD hh:mm:ss</p><p>YYYY/MM/DD hh:mm</p><p>YYYY/MM/DD hh:</p><p>YYYY/MM/DD</p><p>where:</p><p>YYYY = four-digit year</p><p>MM = two-digit month (01=January, etc.)</p><p>DD = two-digit day of month (01 through 31)</p><p>hh = two digits of hour (00 through 23) (am/pm NOT allowed)</p><p>mm = two digits of minute (00 through 59)</p><p>ss = two digits of second (00 through 59)</p></li><li>Accuracy of date matching is determined by the specified date.
            
                <p>Example 1: <code>"#{target.settings.expiryDate}" -gt 2021/01/01</code> would resolve to true for VMs with an expiry date after Jan 1st, 2021 at 00:00:00.</p><p>Example 2: "<code>#{target.settings.expiryDate}" -lt "2021/03/12 08:30"</code> would resolve to true for VMs with an expiry date before March 12, 2021 at 08:30:00. </p><p>Example 3: "<code>#{target.settings.expiryDate}" -ge "2021/04/01 13:00"</code> would resolve to April 1st, 2021 at 1:00:00 PM or later.</p></li><li>For strings and enumerations:
           
                <ul><li>All string comparisons are case-insensitive.</li><li>If the data type of a Commander variable is an enumeration, then the list of string choices is limited.</li></ul></li><li>If the left and right side of the expression aren't the same data type, the expression will evaluate to false. For example:
         
                <pre>"#{target.cpuCount}" -eq true</pre><p>In this example, the data type for the left side of the expression is Integer, and the data type for the right side is Boolean, so this expression will evaluate to false.</p></li><li>If the left side of an expression can't immediately be interpreted by Commander, and the right side of the expression is a date, the left side will also be evaluated as a date. For example:
           
                <pre xml:space="preserve">"#{any.numeric.property}" -eq 2021/01/01</pre><p>This expression would be evaluated as two dates.</p></li></ul><h2 id="Troubleshooting" data-magellan-target="Troubleshooting"><a name="troubleshooting"></a>Troubleshooting</h2><p>When you encounter a syntax error, ensure that your condition follows Commander's conditional expression syntax rules.</p><p>Also check for the following:</p><ul><li>Mismatched and misplaced parentheses.</li><li>An operator without a hyphen preceding it.</li><li>Unclosed quotes.</li></ul><h2 id="ExampleCreateconditionalapprovalworkflow" data-magellan-target="ExampleCreateconditionalapprovalworkflow"><a name="example_cond_approval"></a>Example: Create conditional approval workflow</h2><p>The following procedure shows you how to create a workflow that triggers the approval process only if the monthly cost is greater than 100 USD:</p><ol><li value="1">Go to <b>Configuration &gt; Self-Service</b>.</li><li value="2">Click the <b>Approval</b> tab.</li><li value="3">Create an approval workflow for new service requests or change requests.</li><li value="4">On the Assigned Groups page, decide whether to apply this workflow globally or to specific users or groups.</li><li value="5">In the step details section:
            </li><ul><li>Click <b>Add</b> &gt;&#160;<b>Send Approval Email</b> .</li><li>For <b>Step Execution</b>, select <b>Execute when conditions are met</b>.</li><li>Click <strong>Edit</strong>, then enter the following condition:
          
                    <p class="code">"#{request.cost.monthly}" -gt 100</p></li><li>Click <b>OK</b> to return to the Steps page.</li><li>In the <b>Address List</b> field, enter one or more email addresses (semicolon-separated).</li><li>Customize the <b>Email Body</b> as required.</li></ul><li value="6">Complete the rest of the wizard.
			<p>For more information, see <a href="create-approval-wfs-for-service-requests.htm" class="MCXref xref">Create Approval Workflows for Service Requests</a>.</p></li></ol><h2 id="ExampleMakeaworkflowstepconditionalonapreviousstep" data-magellan-target="ExampleMakeaworkflowstepconditionalonapreviousstep"><a name="example_prev_step"></a>Example: Make a workflow step conditional on a previous step</h2><p>To make a workflow step conditional on whether a previous step has run, use the variable <code>#{steps[x].skipped}</code>, where x is a step number (beginning at 1) or name. This variable returns True if the workflow step did not run, and is supported in all workflow types.</p><p>For example, you might want to allow Service Portal users to back up their VMs using a script you've developed, but this requires the VM to be powered off before it runs. You also want to make sure that if the user requested the backup while the VM was powered on, the VM is powered on again after the backup.</p><ol><li value="1">A Perform Power Action step, with the action Start, with a condition to run only if the VM is powered off. The condition would read:<pre>"#{target.state}" -ne "Not running"&gt;</pre><p>It's important to handle this step this way, instead of making the execution conditional on the state Running, because VM can have several states (including Saved, Starting, Stopping, Suspended and more).</p></li><li value="2">Some other action.</li><li value="3"><p>A Perform Power Action step, with the action Start, with a condition to run only if Step 1 did not run. The condition would read:</p><pre>"#{steps[1].skipped}" -eq true</pre></li></ol><h2 id="ExampleWorkflowsthatonlyrunforspecificservicetypes" data-magellan-target="ExampleWorkflowsthatonlyrunforspecificservicetypes"><a name="multiple_types"></a>Example: Workflows that only run for specific service types</h2><p>Commander supports multiple service types, including:</p><ul><li>VM</li><li>Virtual Service (vApp)</li><li>Database</li><li>Load Balancer</li><li>Auto Scaling Group</li><li>Application Stack</li></ul><p>You can use the "<code>#{target.type}</code>" variable to run a workflow step only on a particular service type. This variable allows you to support multiple service types in a single workflow.</p><p>For example, to specify that a step that applies only to load balancers, enter the following condition:</p><pre>"#{target.type}" -eq "Load Balancer"</pre><p>The <code>#{target.type}</code> variable is supported in the following workflow types:</p><ul><li>Approval workflows for change requests</li><li>Component-level completion workflows</li><li>Command workflows</li></ul><h2 id="Moreexamplestepconditions" data-magellan-target="Moreexamplestepconditions"><a name="more_ex"></a>More example step conditions</h2><p>The following examples apply to approval workflows for change requests and to completion workflows.</p><ul><li>Specify that a step will be carried out only if the requested number of CPUs is greater than two:
        <pre>"#{target.settings.cpuCount}" -gt 2</pre></li><li>Specify that a step will be carried out only on Windows VMs:
        <pre>"#{target.guestOS}" -contains Microsoft</pre></li><li>Specify that a step will be carried out only if resource settings (CPU, memory or storage) have been modified on the request form:
        <pre>"#{request.resourcesChanged}" -eq true</pre></li></ul><h2 id="MorecomplexexamplesusingBooleanoperators" data-magellan-target="MorecomplexexamplesusingBooleanoperators"><a name="ex_boolean"></a>More complex examples using Boolean operators</h2><h3>Conditional Send Approval Email step</h3><p>It's possible to use a Send Approval Email to notify the admin to create an Active Directory computer account before the workflow continues, but only if the previous Execute Approval Script step completed successfully, and the requested service is a Windows VM. </p><p>To make the Send Approval Email step conditional, you can use the following expression:</p><pre>("#{steps[2].exitCode}" -eq 0) -and ("#{request.services[1].components[1].description}" -contains Windows)</pre><p>Note that because the service description may contain spaces, the entire variable is surrounded by double quotes.</p><h3>Conditional Perform Power Action steps</h3><p>It's possible to power off specific types of running VMs. </p><p>Each of the following examples uses a Perform Power Action step with the action Stop, but with a different conditional expression.</p><p>Power off running AWS VMs:</p><pre>("#{target.state}" -eq running) -and ("#{target.cloudAccount.type}" -eq amazon_aws)</pre><p>Power off running VMs, unless they're Azure VMs:</p><pre>("#{target.state}" -eq running) -and (-not ("#{target.cloudAccount.type}" -eq ms_azure))</pre><p>Power off running AWS and VMware VMs:</p><pre>("#{target.state}" -eq running) -and ("#{target.cloudAccount.type}" -eq amazon_aws) -or ("#{target.cloudAccount.type}" -eq vc)</pre></div><div><div style="border-top-color: rgb(245, 245, 245); border-top-style: none; border-top-width: 1px; margin-top: 22px;"><br /><div class="buttons popup-container clearfix topicToolbarProxy _Skins_ToolbarSnowDocsBottomLeft mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic;"><div class="button-group-container-left"><button class="button needs-pie previous-topic-button" title="Previous Topic" disabled="true"><div><div role="img" class="button-icon-wrapper" aria-label="Previous Topic"><div class="button-icon"> </div></div></div></button></div></div><div class="buttons popup-container clearfix topicToolbarProxy _Skins_ToolbarSnowDocsBottomRight mc-component nocontent" style="mc-topic-toolbar-items: NextTopic;"><div class="button-group-container-left"><button class="button needs-pie next-topic-button" title="Next Topic" disabled="true"><div><div role="img" class="button-icon-wrapper" aria-label="Next Topic"><div class="button-icon"> </div></div></div></button></div></div><p>&#160;</p><div style="border-top-color: rgb(245, 245, 245); border-top-style: solid; border-top-width: 1px; margin-top: 22px;"><p>&#160;</p></div><p class="footer-logo">Snow Commander <span class="mc-variable General.VersionShort variable">9.7</span> documentation</p><p class="footer-logo"><img src="../Resources/Images/copyright-regular-8.svg" /> <span class="mc-variable General.Year variable">2024</span> <span class="mc-variable General.CompanyName variable">Flexera</span>&#160;&#160;&#160;Last modified: <span class="mc-variable General.ISOShortDate variable">2024-10-16</span>&#160;&#160;&#160;<span style="color: #FFF;" class="mc-variable System.ShortTime variable">9:31 AM</span></p><p class="footer-logo"><a class="footer-links-herschel" href="https://www.flexera.com/legal/privacy-policy" target="_blank" data-mc-conditions="General.ForWebOnly">Privacy policy</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://www.flexera.com/legal" target="_blank">Terms and conditions</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="mailto:docsportal-feedback@snowsoftware.com" target="_blank">Feedback</a></p><p><span class="hide-when-mobile"><span style="color: #ffffff;" class="mc-variable System.ShortDate variable">10/16/2024</span>&#160;&#160;<span style="color: #ffffff;" class="mc-variable System.ShortTime variable">9:31 AM</span>&#160;&#160;<span style="color: #ffffff;" class="mc-variable General.Version variable">9.7.1</span></span></p></div></div></div>
                                        <div class="column2">
                                            <div data-sticky-container="" id="0RDgMh92QUKCs58uCe0kfA">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="0RDgMh92QUKCs58uCe0kfA:top" data-bottom-anchor="contentBody:bottom" data-scroll-container=".body-container" data-sticky-on="only screen and (min-width: 901px)" data-scroll-container-on="only screen and (min-width: 901px)">
                                                    <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 901px)" class="nocontent menu _Skins_SideMenuWithInThisTopicColumn mc-component">
                                                        <li class="tree-node"><a href="#MakeWorkflowStepsConditional">Make Workflow Steps Conditional</a>
                                                            <ul>
                                                                <li class="tree-node"><a href="#Defineconditionalexpressions">Define conditional expressions</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#Syntaxrules">Syntax rules</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#troubleshooting">Troubleshooting</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#ExampleCreateconditionalapprovalworkflow">Example: Create conditional approval workflow</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#ExampleMakeaworkflowstepconditionalonapreviousstep">Example: Make a workflow step conditional on a previous step</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#ExampleWorkflowsthatonlyrunforspecificservicetypes">Example: Workflows that only run for specific service types</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#Moreexamplestepconditions">More example step conditions</a>
                                                                </li>
                                                                <li class="tree-node"><a href="#MorecomplexexamplesusingBooleanoperators">More complex examples using Boolean operators</a>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="scrollup" style="margin-bottom: 0px; margin-left: 17px;"><a id="scrollup" style="cursor: pointer;">Scroll</a>
                                    </p>
                                    <p>
                                        <!-- This referenced snippet allows an alt text statement to be included for the logo/go-home button on the top of each page -->
                                        <script>/*<![CDATA[*/$(document).ready(function(){
   $('a.logo').attr({
     alt: 'Snow Docs Home',
     title: 'Snow Docs Home'
   });
});/*]]>*/</script>
                                    </p>
                                    <script type="text/javascript">/*<![CDATA[*/if ($(".sticky-menu > ul").children("ul").length == 0){
        $(".sticky-menu > ul").css("visibility", "hidden");
    }/*]]>*/</script>
                                    <script defer="defer" src="../Resources/Scripts/scroll_to_top_left_nav.js" type="text/javascript">
                                    </script>
                                    <script type="text/javascript">/*<![CDATA[*/$("#home-link").prependTo("div.MCBreadcrumbsBox_SnowDocs_0");/*]]>*/</script>
                                    <script type="text/javascript" src="../Resources/Scripts/fa_ext_link.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>