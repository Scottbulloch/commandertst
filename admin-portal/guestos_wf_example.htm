<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation_Skin_SnowDocs" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="Admin Portal|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-conditions="General.NotForSPBuildHelp" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <meta http-equiv="Content-Style-Type" content="text/css" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" /><title>Automate VM Customization through Workflows</title>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <meta charset="utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Styles.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/fontAwesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/roboto.font.css" rel="stylesheet" type="text/css" />
        <style>*
{
	box-sizing: border-box;
}

/* Create two columns that float next to each other */

.column
{
	
}

.column2
{
	
}

/* Clear floats after the columns */

.row:after
{
	content: "";
	display: table;
	clear: both;
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.home-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/home-fa-18w.png') no-repeat center center, linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.next-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-L05Y74KND5" async="async">
        </script>
        <script>/*<![CDATA[*/  window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

		gtag('config', 'G-L05Y74KND5');/*]]>*/</script>
        <script defer="defer" src="../Resources/Scripts/scroll_to_top_left_nav.js" type="text/javascript">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 900px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://docs.snowsoftware.com" title="Docs Portal Home" alt="Docs Portal Home"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="All Commander Docs" title="All Commander Docs" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Commander Docs</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div style="width: 100%; overflow: hidden;"><span class="hide-when-mobile"><div><div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBarPrint mc-component nocontent" style="mc-topic-toolbar-items: Print;"><div class="button-group-container-left"><button class="button needs-pie print-button" title="Print this page"><div><div role="img" class="button-icon-wrapper" aria-label="Print"><div class="button-icon"> </div></div></div></button></div></div><a href="/commander/index.htm"><div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBarHome mc-component nocontent" style="mc-topic-toolbar-items: Home;"><div class="button-group-container-left"><button class="button needs-pie home-button" title="Commander Docs Home"><div><div role="img" class="button-icon-wrapper"><div class="button-icon"> </div></div></div></button></div></div></a></div><div style="float: right; padding-right: 25px; padding-left: 25px;"><a href="https://www.snowsoftware.com" target="_blank" style="font-size: 11px; color: #606f7b;">snowsoftware.com</a>&#160;&#160;&#160;</div></span><span id="home-link"><a style="font-size: 11px;font-style: normal;color: #606f7b;" href="../index.htm">Commander</a> / </span>
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_SnowDocs_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column"> <div role="main" id="mc-main-content"><h1 id="AutomateVMCustomizationthroughWorkflows" data-magellan-target="AutomateVMCustomizationthroughWorkflows"><a name="aanchor468"></a><MadCap:concept term="Admin Portal" />Automate VM Customization through Workflows</h1><p>This topic provides examples of using workflow steps to automate the VM customization process. The first example involves fewer changes to your process; the other provides more flexibility.</p><p>In our example company:</p><ul><li>BlueCat™ IPAM is used for address management, with static DNS. (To learn how to integrate with BlueCat™, see <a href="bluecat_integration.htm" class="MCXref xref">Integrate BlueCat™ IP Address Management</a>.)</li><li>VMware customization specs are currently used to join the VM to a domain, using one customization spec for each domain. The customization specs are currently set to prompt for the IP address.</li><li>VMware customization specs are also used to configure networking.</li><li>The customization process is also used to run a Windows batch script to install software on deployed VMs.</li></ul><p class="Note">In these examples, only the non-default settings are mentioned.</p><p><b>IMPORTANT</b>: The first step in a component-level completion workflow for a new VM should be a <b>Wait for Guest OS to Power On</b> step, so that variables such as IP addresses have values before other steps are run. For Windows VMs, it may take longer than the default 300 seconds (five minutes) to obtain an IP address and DNS name. You may want to use two steps: one that waits for guest OS customization to complete, and one that waits for IP address and DNS name.</p><h2 id="Solution1Fewerchangestoexistingprocess" data-magellan-target="Solution1Fewerchangestoexistingprocess"><a name="few_changes"></a>Solution 1: Fewer changes to existing process</h2><p>Although there are no changes to customization specs, this solution is less flexible. With this solution, you need to set up a workflow for both Windows and Linux. The example below shows the setup for Windows only.</p><h3>Edit the service catalog entry</h3><p>You will edit a service catalog entry so that it no longer uses a customization spec.</p><ol><li value="1">Go to <b>Configuration &gt; Self-Service</b>, and select the <b>Catalog</b> tab.</li><li value="2">Click <b>Edit</b> for the appropriate service catalog entry, then under <b>Component Blueprints</b>, select the applicable service catalog component.</li><li value="3">On the <b>Infrastructure</b> tab, from <b>Customization Spec</b>, select <b>None</b>.
                <p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="Images/customize-ex1-catalog-win.png" data-mc-popup-alt="Edit Service in Catalog"><img class="MCPopupThumbnail img imgThumbnail" data-mc-width="911" data-mc-height="496" src="Images/customize-ex1-catalog-win_thumb_0_0.png" alt="Edit Service in Catalog" title="Edit Service in Catalog" tabindex="" /></a></p></li><li value="4">Click <b>Finish</b>.</li></ol><h3>Create a component-level completion workflow</h3><ol><li value="1">Go to <b>Configuration &gt; Self-Service</b>, click the <b>Completion tab</b>.</li><li value="2">On the Workflows page, click <b>Add</b>.</li><li value="3">In the Completion Workflow Configuration dialog, do the following:<ol><li value="1">In the <b>Name </b>field, enter a name for the workflow.</li><li value="2">From the <b>Apply this workflow</b> drop-down list, select <b>after a VM is deployed</b>.</li><li value="3">Click <b>Next</b>.
</li></ol></li><li value="4">To wait for the IP address and DNS name to be assigned to the deployed VM, do the following:</li><ol style="list-style-type: lower-alpha;"><li value="1">In the Step Order section, click <b>Add &gt; Wait For Event</b>.</li><li value="2">In the Wait For Event step details section:</li><ul><li>For the <b>Step Name</b>, enter "Wait for IP and DNS".</li><li>For <b>Wait For</b>, select <b>Service to obtain IP address and DNS name</b>.</li></ul><p><img src="Images/customize-ex1-win-step1.png" alt="Wait for Event Step Details" style="max-width: 99%;" /></p><p class="Note">For Windows VMs, it may take longer than the default 300 seconds (five minutes) to obtain an IP address and DNS name. So you may want to use two steps: one that waits for guest OS customization to complete, and one that waits for IP address and DNS name.</p></ol><li value="5">To make a call to BlueCat™ to obtain the IP address and assign network settings, do the following:<ol><li value="1">In the Step Order section, click <b>Add &gt; Guest OS &gt; Configure OS Networking</b>.</li><li value="2">In the Configure OS Networking step details section:<ul><li>For the <b>Step Name</b>, enter "Configure BlueCat Networking".</li><li>For <b>Credentials</b> drop-down, select the applicable credentials or click <b>Add Credentials</b>. See <a href="config_network_wf_step.htm#prereqs" class="MCXref xref">Prerequisites</a> for guidance.</li><li>For <b>Assign IP</b>, select <b>FromBlueCat™ IPAM</b>.</li><li>For <b>Action</b>, select <b>Reserve Only</b>. This setting records the IP information in the approval comments. <p class="Note">If you select Apply Settings (as shown in the next solution), the settings are applied as part of the workflow step.</p></li><li>Enter networking details as required. The <b>Gateway</b>, <b>DNS View</b>, <b>Block</b>, <b>Network</b> and <b>Domain Name</b> fields are mandatory.</li></ul><p><img alt="Config Networking" title="Config Networking" style="height: auto;max-width: 99.99%;width: auto;" src="Images/customize-ex1-win-step2.png" /></p></li></ol></li></ol><ol data-mc-continue="true"><li value="6">To power off the VM, do the following:<ol data-mc-continue="true"><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Perform Power Action</b>.</li><li value="2">In the <b>Perform Power Action</b> step details section:<ul data-mc-continue="true"><li>In the <b>Step Name</b> field, enter "Stop VM".</li><li>For <b>Action</b>, select <b>Stop</b>.
</li></ul><p><img alt="Perform Power Action Step" title="Perform Power Action Step" src="Images/customize-ex1-win-step3.png" style="max-width: 99%;" /></p></li></ol></li><li value="7">To wait for the VM to power off, do the following:<ol data-mc-continue="true"><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Wait For Event</b>.</li><li value="2">In the <b>Wait For Event Step Details</b> section:<ul data-mc-continue="true"><li>In the <b>Step Name</b> field, enter "Wait for power off".</li><li>For <b>Wait For</b>, select <b>Service to power off</b>.
</li></ul><p><img alt="Wait For Event Step Details" title="Wait For Event Step Details" src="Images/customize-ex1-win-step4.png" style="max-width: 99%;" /></p></li></ol></li><li value="8">To run a customization process, do the following:<ol data-mc-continue="true"><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Guest OS &gt; Customize VM</b>.</li><li value="2"> In the <b>Customize VM</b> step details section:<ul data-mc-continue="true"><li>For <b>Step Name</b>, enter "Customize VM".</li><li>For <b>Customization Spec</b>, select the appropriate customization spec.
</li></ul><p><img alt="Customize VM Step Details" title="Customize VM Step Details" src="Images/customize-ex1-win-step5.png" style="max-width: 99%;" /></p></li></ol></li><li value="9">To wait for the customization process to complete, do the following: <ol data-mc-continue="true"><li value="1">In the Step Order section, click <b>Add &gt; Wait For Event</b>.</li><li value="2"> In the Wait for Event step details section:<ul data-mc-continue="true"><li>For <b>Step Name</b>, enter "Wait for customization".</li><li>For <b>Wait For</b>, select <b>Guest OS customization to complete</b>.</li><li>For <b>Wait Time</b>, enter at least 1800 seconds for Windows (the default 300 seconds is appropriate for Linux).</li></ul><p><img alt="Wait For Event Step Details" title="Wait For Event Step Details" src="Images/customize-ex1-win-step6.png" style="max-width: 99%;" /></p></li></ol></li><li value="10">To wait for the IP address and DNS name to be assigned to the deployed VM, do the following:<ol data-mc-continue="true"><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Wait For Event</b>.</li><li value="2">In the <b>Wait For Event</b> step details section:<ul data-mc-continue="true"><li>For <b>Step Name</b>, enter "Wait for IP and DNS 2".</li><li>For  <b>Wait For</b>, select <b>Service to obtain IP address and DNS name</b>.</li></ul><p><img alt="Wait For Event Step Details" title="Wait For Event Step Details" src="Images/customize-ex1-win-step7.png" style="max-width: 99%;" /></p></li></ol></li><li value="11">To send an email to inform people that the VM is ready, do the following:<ol data-mc-continue="true"><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Send Email</b>.</li><li value="2">In the <b>Send Email</b> step details section:<ul data-mc-continue="true"><li>For <b>Address List</b>, enter one or more email addresses (separate multiple addresses with semicolons).</li><li>For <b>Email Subject</b>, enter a subject.</li><li>For <b>Email Body</b>, enter the required information.</li></ul><p><img alt="Send Email Step Details" title="Send Email Step Details" src="Images/customize-ex1-win-step8.png" style="max-width: 99%;" /></p></li></ol></li><li value="12">Now that you've added all of the workflow steps, click <b>Next</b>.</li><li value="13">On the Assigned Components page, do the following:<ol data-mc-continue="true"><li value="1">Select <b>Apply this workflow to the selected components</b>, then select the components that you want to apply the workflow to.</li><li value="2">Click <b>Next</b>.</li></ol></li><li value="14">On the Summary page, do the following:<ol data-mc-continue="true"><li value="1">For <b> Description of Changes</b>, enter details about the workflow.</li><li value="2">Click <b>Finish</b>.</li></ol></li></ol><h2 id="Solution2Moreflexibility" data-magellan-target="Solution2Moreflexibility"><a name="flexible"></a>Solution 2: More flexibility</h2><p>In this solution, you modify customization specs using workflow steps to do more of the customization work.</p><h3>Integrate Commander with BlueCat™</h3><p>Create credentials and connect Commander to a BlueCat™ server as detailed in <a href="bluecat_integration.htm" class="MCXref xref">Integrate BlueCat™ IP Address Management</a>.</p><h3>Modify your customization specs</h3><p>Edit your customization specs so that:</p><ul><li>The IP address is set to 1.1.1.1, instead of prompting for the IP address.</li><li>The VM isn't joined to a domain.</li></ul><h3>Assign customization specs to the proper service catalog entries</h3><ol><li value="1">Go to <b>Configuration &gt; Self-Service</b>, and click the <b>Catalog</b> tab.</li><li value="2">Edit the service catalog entry, and on a Component Blueprints page, make a selection from the <b>Customization Spec</b> menu.</li><li value="3">Click <b>Edit</b> for the appropriate service catalog entry, then under the <b>Component Blueprints</b>, select the appropriate service catalog component and make a selection from the <b>Customization Spec</b> menu.</li><li value="4">Click <b>Finish</b>.</li></ol><h3>Create a component-level completion workflow</h3><ol><li value="1">Go to <b>Configuration &gt; Self-Service</b>, and click the <b>Completion </b> tab, then click <b>Add</b>.</li><li value="2">In the Completion Workflow Configuration dialog, do the following:<ol><li value="1">In the <b>Name </b>field, enter a name for the workflow.</li><li value="2">From the <b>Apply this Workflow</b> drop-down, select <b>after a VM is deployed</b>.</li><li value="3"> Click <b>Next</b>.</li></ol></li><li value="3">To wait for customization to complete, do the following:
           
                <ol style="list-style-type: lower-alpha;"><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Wait For Event</b>.</li><li value="2">In the <b>Wait For Event step</b> details section:<ul><li>For <b>Step Name</b>, enter "Wait for Sysprep to complete".</li><li>For <b>Wait For</b>, select <b>Guest OS customization to complete</b>.</li><li>In the <b>Wait Time</b> field, enter the amount of time for the event to complete. For Windows, enter at least 900 seconds. For Linux, the default 300 seconds is appropriate.</li></ul><p><img alt="Wait for Event Step Details" title="Wait for Event Step Details" style="height: auto;max-width: 99.99%;width: auto;" src="Images/customize-ex2-step1.png" /></p><p class="Note">For Windows VMs, you may want to use two steps: one that waits for guest OS customization to complete, and one that waits for IP address and DNS name.</p></li></ol></li><li value="4">To wait for the VM to power on, do the following:<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Wait For Event</b>.</li><li value="2">In the <b>Wait For Event</b> step details section:<ul><li>For <b>Step Name</b>, enter "Wait for power on".</li><li>For <b>Wait For</b>, select <b>Guest OS to power on</b>.</li></ul><p><img alt="Wait For Event Step Details" title="Wait For Event Step Details" src="Images/customize-ex2-step2.png" style="max-width: 100%;" /></p></li></ol></li><li value="5">To make a call to BlueCat™ to obtain the IP address and assign network settings, do the following:<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Guest OS &gt; Configure OS Networking</b>.</li><li value="2">In the <b>Configure OS Networking</b> step details section:<ul><li>For <b>Step Name</b>, enter "Configure BlueCat Networking".</li><li>For <b>Credentials</b>, select credentials or click <b>Add Credentials</b>. See <a href="config_network_wf_step.htm" class="MCXref xref">Configure OS Networking Through Workflow Steps</a> for guidance.</li><li>For  <b>Assign IP</b>, select <b>From BlueCat™ IPAM</b>.</li><li>For <b>Action</b>, select <b>Apply Settings</b>. <p class="Note">If you select Reserve Only (as shown in the previous solution), the IP information is recorded in the approval comments.   The output can be used as input to a subsequent Customize VM step in the workflow.</p></li><li>Enter networking details as required. The <b>Gateway</b>, <b>DNS View</b>, <b>Block</b>, <b>Network</b>, and <b>Domain Name</b> fields are mandatory.</li></ul><p><img alt="Configuring Network Details" title="Configuring Network Details" src="Images/customize-ex2-step3.png" style="max-width: 99%;" /></p></li></ol></li><li value="6">To wait for 30 seconds, do the following:&#160;<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Wait For Event</b>.</li><li value="2">In the <b>Wait For Event</b> step details section:<ul><li>For <b>Step Name</b>, enter "Wait for 30 seconds".</li><li>For <b>Wait For</b>, select <b>Time to elapse</b>.</li><li>For <b>Wait Time</b>, enter "30".
</li></ul><p><img alt="Wait For Event Step Details" title="Wait For Event Step Details" src="Images/customize-ex2-step4.png" style="max-width: 99%;" /></p></li></ol></li><li value="7">To join the VM to the Windows domain, do the following:<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Guest OS &gt; Join Domain</b>.</li><li value="2">In the <b>Join Domain</b> step details section:<ul><li>For <b>Step Name</b>, enter "Join to Windows domain".</li><li>For <b>Guest OS Credentials</b>, select the applicable credentials or click <b>Add Credentials</b>.</li><li>Leave the <b>Restart Guest OS</b> option enabled.</li><li>Enter a domain name and select the appropriate domain credentials.
</li></ul><p><img alt="Join Domain step" title="Join Domain step" src="Images/customize-ex2-step5.png" style="max-width: 100%;" /></p></li></ol></li><li value="8">To wait for IP address and DNS name assignment, do the following:<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Guest OS &gt; Wait for Event</b>.</li><li value="2">In the <b>Wait For Event</b> step details section:<ul><li>For <b>Step Name</b>, enter "Wait for IP and DNS".</li><li>For <b>Wait For</b>, select <b>Service to obtain IP address and DNS name</b>.</li></ul><p><img alt="Wait For IP and DNS step" title="Wait For IP and DNS step" src="Images/customize-ex2-step6.png" style="max-width: 100%;" /></p><p class="Note">For Windows VMs, you may want to use two steps: one that waits for guest OS customization to complete, and one that waits for IP address and DNS name.</p></li></ol></li><li value="9">To give the PV domain group permissions on the deployed VM, do the following:<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Guest OS &gt; Run Program</b>.</li><li value="2">In the <b>Run Program</b> step details section:<ul><li>For <b>Step Name</b>, enter "Grant QA permissions".</li><li>For <b>Credentials</b>, select the appropriate credentials or click <b>Add Credentials</b>. See <a href="config_network_wf_step.htm" class="MCXref xref">Configure OS Networking Through Workflow Steps</a> for guidance.</li><li>For <b>Command Line</b>, enter a command for granting permissions.</li></ul><p><img alt="Run Program step" title="Run Program step" src="Images/customize-ex2-step7.png" style="max-width: 100%;" /></p></li></ol></li><li value="10">To run a script that installs Microsoft Security Essentials on the deployed VM, do the following:<ol><li value="1">In the <b>Step Order</b> section, click <b>Add &gt; Guest OS &gt; Run Program</b>.</li><li value="2">In the <b>Run Program</b> step details section:<ul><li>For <b>Step Name</b>, enter  "Install software".</li><li>For <b>Credentials</b>, select the applicable credentials or click <b>Add Credentials</b>. See <a href="config_network_wf_step.htm" class="MCXref xref">Configure OS Networking Through Workflow Steps</a> for guidance.</li><li>For <b>Command Line</b>, enter a command for installing software.
</li></ul><p><img alt="Run Program step" title="Run Program step" style="height: auto;max-width: 99.99%;width: auto;" src="Images/customize-ex2-step8.png" /></p></li></ol></li></ol><ol data-mc-continue="true"><li value="11">Now that you've added all of the workflow steps, click <b>Next</b>.</li><li value="12">On the Assigned Components page, do the following:<ol data-mc-continue="true"><li value="1">Select <b>Apply this workflow to the selected components</b>, then select the components that you want to apply the workflow to.</li><li value="2">Click <b>Next</b>.</li></ol></li><li value="13">On the Summary page, do the following:<ol data-mc-continue="true"><li value="1">For <b>Description of Changes</b>, enter details about the workflow.</li><li value="2">Click <b>Finish</b>.</li></ol></li></ol></div><div><div style="border-top-color: rgb(245, 245, 245); border-top-style: none; border-top-width: 1px; margin-top: 22px;"><br /><div class="buttons popup-container clearfix topicToolbarProxy _Skins_ToolbarSnowDocsBottomLeft mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic;"><div class="button-group-container-left"><button class="button needs-pie previous-topic-button" title="Previous Topic" disabled="true"><div><div role="img" class="button-icon-wrapper" aria-label="Previous Topic"><div class="button-icon"> </div></div></div></button></div></div><div class="buttons popup-container clearfix topicToolbarProxy _Skins_ToolbarSnowDocsBottomRight mc-component nocontent" style="mc-topic-toolbar-items: NextTopic;"><div class="button-group-container-left"><button class="button needs-pie next-topic-button" title="Next Topic" disabled="true"><div><div role="img" class="button-icon-wrapper" aria-label="Next Topic"><div class="button-icon"> </div></div></div></button></div></div><p>&#160;</p><div style="border-top-color: rgb(245, 245, 245); border-top-style: solid; border-top-width: 1px; margin-top: 22px;"><p>&#160;</p></div><p class="footer-logo">Snow Commander <span class="mc-variable General.VersionShort variable">9.6</span> documentation</p><p class="footer-logo"><img src="../Resources/Images/copyright-regular-8.svg" /> <span class="mc-variable General.Year variable">2024</span> <span class="mc-variable General.CompanyName variable">Snow Software</span>&#160;&#160;&#160;Last modified: <span class="mc-variable General.ISOShortDate variable">2024-05-21</span>&#160;&#160;&#160;<span style="color: #FFF;" class="mc-variable System.ShortTime variable">7:04 PM</span></p><p class="footer-logo"><a class="footer-links-herschel" href="https://www.snowsoftware.com/legal/termsofuse" target="_blank" data-mc-conditions="General.ForWebOnly">Terms of use</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://www.snowsoftware.com/seo/legal-privacy-policy" target="_blank" data-mc-conditions="General.ForWebOnly">Privacy policy</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://www.snowsoftware.com/legal/dataprotection" target="_blank">Data protection</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://go.snowsoftware.com/subscription-center.html" target="_blank">Subscription&#160;center</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://community.snowsoftware.com/s" target="_blank">Community</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="mailto:docsportal-feedback@snowsoftware.com" target="_blank">Docs Feedback</a></p><p><span class="hide-when-mobile"><span style="color: #ffffff;" class="mc-variable System.ShortDate variable">5/21/2024</span>&#160;&#160;<span style="color: #ffffff;" class="mc-variable System.ShortTime variable">7:04 PM</span>&#160;&#160;<span style="color: #ffffff;" class="mc-variable General.Version variable">9.6.3</span></span></p></div></div></div>
                                        <div class="column2">
                                            <div data-sticky-container="" id="NN2ArEwPj0-1fMkxiCOI3Q">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="NN2ArEwPj0-1fMkxiCOI3Q:top" data-bottom-anchor="contentBody:bottom" data-scroll-container=".body-container" data-sticky-on="only screen and (min-width: 901px)" data-scroll-container-on="only screen and (min-width: 901px)">
                                                    <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 901px)" class="nocontent menu _Skins_SideMenuWithInThisTopicColumn mc-component">
                                                        <li><a href="#AutomateVMCustomizationthroughWorkflows">Automate VM Customization through Workflows</a>
                                                        </li>
                                                        <ul>
                                                            <li><a href="#Solution1Fewerchangestoexistingprocess">Solution 1: Fewer changes to existing process</a>
                                                            </li>
                                                            <li><a href="#Solution2Moreflexibility">Solution 2: More flexibility</a>
                                                            </li>
                                                        </ul>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="scrollup" style="margin-bottom: 0px; margin-left: 17px;"><a id="scrollup" style="cursor: pointer;">Scroll</a>
                                    </p>
                                    <p>
                                        <!-- This referenced snippet allows an alt text statement to be included for the logo/go-home button on the top of each page -->
                                        <script>/*<![CDATA[*/$(document).ready(function(){
   $('a.logo').attr({
     alt: 'Snow Docs Home',
     title: 'Snow Docs Home'
   });
});/*]]>*/</script>
                                    </p>
                                    <script type="text/javascript">/*<![CDATA[*/if ($(".sticky-menu > ul").children("ul").length == 0){
        $(".sticky-menu > ul").css("visibility", "hidden");
    }/*]]>*/</script>
                                    <script defer="defer" src="../Resources/Scripts/scroll_to_top_left_nav.js" type="text/javascript">
                                    </script>
                                    <script type="text/javascript">/*<![CDATA[*/$("#home-link").prependTo("div.MCBreadcrumbsBox_SnowDocs_0");/*]]>*/</script>
                                    <script type="text/javascript" src="../Resources/Scripts/fa_ext_link.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>