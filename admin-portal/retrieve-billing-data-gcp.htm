<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation_Skin_SnowDocs" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="Admin Portal|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-conditions="General.NotForSPBuildHelp" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" /><title>Retrieve GCP Billing Data</title>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <meta charset="utf-8" />
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/Styles.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/fontAwesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/Stylesheets/roboto.font.css" rel="stylesheet" type="text/css" />
        <style>*
{
	box-sizing: border-box;
}

/* Create two columns that float next to each other */

.column
{
	
}

.column2
{
	
}

/* Clear floats after the columns */

.row:after
{
	content: "";
	display: table;
	clear: both;
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.home-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/home-fa-18w.png') no-repeat center center, linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <style>/*&lt;meta /&gt;*/

.button.next-topic-button
{
	-pie-background: linear-gradient(transparent, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE.htc');
}

</style>
        <link href="../Resources/TableStyles/AccessAndAvailability.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script src="https://www.googletagmanager.com/gtag/js?id=G-L05Y74KND5" async="async">
        </script>
        <script>/*<![CDATA[*/  window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

		gtag('config', 'G-L05Y74KND5');/*]]>*/</script>
        <script defer="defer" src="../Resources/Scripts/scroll_to_top_left_nav.js" type="text/javascript">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 900px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="https://docs.snowsoftware.com" title="Docs Portal Home" alt="Docs Portal Home"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="All Commander Docs" title="All Commander Docs" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Commander Docs</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div style="width: 100%; overflow: hidden;"><span class="hide-when-mobile"><div><div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBarPrint mc-component nocontent" style="mc-topic-toolbar-items: Print;"><div class="button-group-container-left"><button class="button needs-pie print-button" title="Print this page"><div><div role="img" class="button-icon-wrapper" aria-label="Print"><div class="button-icon"> </div></div></div></button></div></div><a href="/commander/index.htm"><div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBarHome mc-component nocontent" style="mc-topic-toolbar-items: Home;"><div class="button-group-container-left"><button class="button needs-pie home-button" title="Commander Docs Home"><div><div role="img" class="button-icon-wrapper"><div class="button-icon"> </div></div></div></button></div></div></a></div><div style="float: right; padding-right: 25px; padding-left: 25px;"><a href="https://www.snowsoftware.com" target="_blank" style="font-size: 11px; color: #606f7b;">snowsoftware.com</a>&#160;&#160;&#160;</div></span><span id="home-link"><a style="font-size: 11px;font-style: normal;color: #606f7b;" href="../index.htm">Commander</a> / </span>
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_SnowDocs_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="3" data-mc-toc="True">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="column"> <div role="main" id="mc-main-content"><h1 id="RetrieveGCPBillingData" data-magellan-target="RetrieveGCPBillingData"><a name="aanchor154"></a><MadCap:concept term="Admin Portal" />Retrieve GCP Billing Data</h1><p>You can configure Commander to retrieve Google Cloud Platform billing data. Retrieving billing data provides information for the <a href="cloud-billing-report.htm" class="MCXref xref">Cloud Billing Report</a> and <a href="cost-analytics.htm" class="MCXref xref">Cost Analytics</a>. As well as general usage costs, these reports include metered usage costs such as Storage and Network I/O. Any credits in the billing data are also accounted for, and the service costs are automatically adjusted for those credits.</p><p>Online, you can read about the basics of <a href="https://cloud.google.com/billing/docs/" class="LinkOut">Google Cloud billing</a> in general, including <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery" target="_blank" title="Google Cloud Documentation" alt="Google Cloud Documentation">exporting billing data to BigQuery</a>.</p><p>For resellers configuring billing for GCP subaccounts, see <a href="gcp-billing-subaccounts.htm" class="MCXref xref">GCP Billing Subaccounts for Resellers</a>.</p><h2 id="Aboutbillingdataretrieval" data-magellan-target="Aboutbillingdataretrieval">About billing data retrieval</h2><p>Commander can retrieve data from before the GCP account was added as a cloud account. New billing data is then retrieved nightly.</p><p>Unlike AWS and Azure, Google Cloud Platform doesn’t associate costs with VMs, so VM billing records won't be created and the Cloud Billing Report for GCP private clouds won't be populated. The Cloud Billing report for GCP&#160;will only show the projected cost model, not the historical or current cost models.</p><p><a name="discovered_gcp"></a>Commander also retrieves billing data for services that have never been managed by Commander. For example, if a GCP account was added as a cloud account 90 days ago, and you configure Commander to retrieve billing data today, Commander retrieves the last 60 days' worth of billing data for all services that have existed at any point over the last 60 days. As another example, if you add a GCP account as a cloud account today, and you configure Commander to retrieve billing data today, Commander retrieves the last 60 days' worth of billing data for all services that have existed at any point over the last 60 days, including services that were never managed by Commander.</p><p>GCP starts exporting billing data once export has been configured in the GCP&#160;Console, and doesn't backfill billing data. This means that Commander can only retrieve billing data from the time that billing data export is configured in GCP Console.</p><p><a name="unmanaged_gcp"></a>Billing data also includes costs for resources and services that aren't managed by Commander but will show up on your bill, such as Cloud Datastore, BigQuery, Stackdriver Logging and Cloud CDN. When a resource not managed by Commander is discovered in the billing data, ownership is assigned to all costs, based on the <a href="set-resource-ownership-with-policies.htm" class="hreflinks">Default Ownership policy</a> and the service's location in the Infrastructure or Applications tree, for the purposes of <a href="cost-analytics.htm" class="MCXref xref">Cost Analytics</a> in both Commander and the Service Portal.</p><p class="Note">Commander billing data are stored and queried in a universal date without time or time zone. For example, if you are retrieving or injecting billing data for November 30, 2021, Commander interprets this date without any time zone shift, regardless of where you are located. Cost information retrieved from this public cloud provider is split at midnight in the GMT time zone and then stored in Commander with a universal date without time or time zone.</p><h3>GCP Billing Tags</h3><p>Billing Tags allow you to group and filter your expenses in more detail. You can use these tags to filter expenses in Cost Analytics, the Service Portal Cost Dashboard, and the Cloud Billing Report.</p><p>Billing Tags are set up as labels and project.labels in your GCP account and automatically imported during billing data retrieval. If labels and project.labels contain the same tag keys with different values, the value from the labels data set will be used. GCP system.labels won't be retrieved. For more information GCP labels, see the GCP online documentation at <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery" class="LinkOut">Export Cloud Billing data to BigQuery</a>.</p><p>Billing Tags can also be incorporated into formulas that are used to create Additional Line Items for cost analytics. For information on using Billing Tags in formulas for Additional Line Items, see <a href="cost_models.htm#additional_line_items" class="MCXref xref">Additional Line Items page</a>.</p><ul class="NoteMultiple"><li>Before upgrade to 8.1.0, filtering Cost Analytics and the Service Portal Cost Dashboard by Custom Attributes affected the Recommendations. After upgrade, filtering by Billing Tags won't affect the Recommendations.</li><li>Billing Tags and SKUs will only be retrieved from Version 8.1 and forward, unless billing records are reset. Please create a case through the <a href="https://community.snowsoftware.com/s/support-hub">Snow Support Portal</a> if you would like to perform this activity.</li></ul><h3>How the GCP billing model maps to Commander costing</h3><p>A GCP cloud account may include multiple projects, so a single cloud account may be associated with multiple billing accounts.</p><p>Likewise, if you've added multiple GCP cloud accounts, the same project may be included in multiple cloud accounts, meaning that multiple cloud accounts may be linked to the same billing account.</p><p>To help you understand this relationship, see the following diagram:</p><p><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="Images/gcp-billing-data.png" data-mc-popup-alt="Relationship Between GCP Billing Data and Cloud Accounts"><img class="MCPopupThumbnail img imgThumbnail" data-mc-width="1363" data-mc-height="882" src="Images/gcp-billing-data_thumb_0_0.png" alt="Relationship Between GCP Billing Data and Cloud Accounts" title="Relationship Between GCP Billing Data and Cloud Accounts" tabindex="" /></a></p><p>Note the following about this example:</p><ul><li>When you export a BigQuery dataset, you must select its project location. In this example, BigQuery Dataset 1 is located in Project 1, Big Query Dataset 2 is located in Project 3, and BigQuery Dataset 3 is located in Project 7.</li><li>When you configure billing data retrieval for Cloud Account 1, Commander retrieves billing data from BigQuery Dataset 1 and 2. Because Project 1 is visible to both cloud accounts, billing data is automatically retrieved for this project in Cloud Account 2, even if you haven't configured billing data retrieval for Cloud Account 2.</li><li>Because Cloud Accounts 1 and 2 share a billing account, once billing data is retrieved for Billing Account 1, charges for Project 1, 2 and 6 are added to both cloud accounts.</li><li>If you want to retrieve billing data for Project 7 and 8, you must also configure billing data retrieval for Cloud Account 2, pointing to BigQuery Dataset 3.</li><li>Billing isn't enabled for Project 5.</li></ul><h2 id="Overviewofsteps" data-magellan-target="Overviewofsteps"><a name="overview"></a>Overview of steps</h2><p>To retrieve GCP billing data, there are several mandatory steps:</p><ol><li value="1"><a href="#export_bigquery" class="MCXref xref">Export billing data to BigQuery</a></li><li value="2"><a href="#enable-apis" class="MCXref xref">Enable the Cloud Billing API</a></li><li value="3"><a href="#grant-permissions" class="MCXref xref">Grant dataset permissions to the Commander service account</a></li><li value="4"><a href="#config_owners" class="MCXref xref">Configure the Default Ownership policy</a></li><li value="5"><a href="#retrieve" class="MCXref xref">Retrieve GCP billing data</a></li></ol><h2 id="ExportbillingdatatoBigQuery" data-magellan-target="ExportbillingdatatoBigQuery"><a name="export_bigquery"></a>Export billing data to BigQuery</h2><p>To be able to retrieve GCP billing data in Commander, you must export billing data to Google BigQuery.</p><p>To learn how, see <a href="https://cloud.google.com/billing/docs/how-to/export-data-bigquery" target="_blank">Export Billing Data to BigQuery</a> in the Google Cloud documentation.</p><ul class="NoteMultiple"><li>Commander supports only v1 of the BigQuery data export tables; the original version isn't supported.</li><li>Commander doesn't support GCP billing data exported to CSV or JSON. Only BigQuery datasets are supported.</li></ul><h2 id="EnabletheCloudBillingAPI" data-magellan-target="EnabletheCloudBillingAPI"><a name="enable-apis"></a>Enable the Cloud Billing API</h2><p>In the GCP Console, ensure that the Cloud Billing API is enabled for the project where the <a href="manage-google-cloud-platform.htm#create-srvc-acct">Commander service account is located</a>.</p><p>To learn how to enable APIs for a project, see <a href="https://cloud.google.com/service-usage/docs/enable-disable" target="_blank" title="Google Cloud Documentation" alt="Google Cloud Documentation">Enabling and Disabling Services</a> in the Google Cloud documentation.</p><h2 id="GrantdatasetpermissionstotheCommanderserviceaccount" data-magellan-target="GrantdatasetpermissionstotheCommanderserviceaccount"><a name="grant-permissions"></a>Grant dataset permissions to the Commander service account</h2><p>Ensure that the service account has access to the exported BigQuery dataset.
For more information, see <a href="manage-google-cloud-platform.htm#grant-permissions" class="MCXref xref">Grant permissions to the Commander service account</a>.</p><h2 id="ConfiguretheDefaultOwnershippolicy" data-magellan-target="ConfiguretheDefaultOwnershippolicy"><a name="config_owners"></a>Configure the Default Ownership policy</h2><p>GCP charges aggregated CPU and memory usage costs, grouped by project and service type. GCP billing data doesn't include costs for individual VMs.  <b>Before</b> you retrieve billing data, you must configure the Default Ownership policy, to ensure that cost analytics are accurate, and costs are assigned to the proper owners and organizations.</p><p>For example, if you configure the Default Ownership policy to assign ownership of all services in GCP Project X to Commander Organization A, Commander can then assign the total cost of all services in Project X to Commander Organization A.</p><p>If you don't configure the Default Ownership policy before retrieving billing data, ownership won't be applied to the retrieved costs. This means that:</p><ul><li>Cost Analytics information won't be accurate.</li><li>In the Service Portal, charges won't be visible.</li><li>In Commander, no ownership information will be assigned to the charges.</li></ul><p>For GCP, don’t create an ownership policy on a cloud account if it's sharing resources.</p><p>While the Default Ownership policy applies ownership only to <b>new</b> services, Commander also uses this policy to assign ownership to newly retrieved costs for the purposes of <a href="cost-analytics.htm" class="MCXref xref">Cost Analytics</a>.</p><p>To learn how to configure the Default Ownership policy, see <a href="set-resource-ownership-with-policies.htm" class="MCXref xref">Set Resource Ownership with Policies</a>.</p><h2 id="RetrieveGCPbillingdata" data-magellan-target="RetrieveGCPbillingdata"><a name="retrieve"></a>Retrieve GCP billing data</h2><p>You need to configure billing data retrieval in Commander at the cloud account level.</p><p>If you have multiple GCP cloud accounts and they use the same single billing account, billing data for all of the cloud accounts will be retrieved at the same time. There's no need to configure billing data retrieval for the other cloud accounts.</p><p>Once billing data retrieval is configured for GCP, estimated costs are replaced with billing data costs in <a href="cost-analytics.htm" class="MCXref xref">Cost Analytics</a>. Cost analytics won't include costs for services associated with any billing accounts whose data hasn't been retrieved, so we recommend retrieving billing data for all associated billing accounts.</p><table style="width: 100%;mc-table-style: url('../Resources/TableStyles/AccessAndAvailability.css');" class="TableStyle-AccessAndAvailability" cellspacing="0"><col class="TableStyle-AccessAndAvailability-Column-Column1"></col><col class="TableStyle-AccessAndAvailability-Column-Column2"></col><tbody><tr class="TableStyle-AccessAndAvailability-Body-Body1"><td class="TableStyle-AccessAndAvailability-BodyE-Column1-Body1"><p><b>Access:</b></p></td><td class="TableStyle-AccessAndAvailability-BodyD-Column2-Body1"><p>Views &gt; Inventory &gt; Infrastructure or Applications</p></td></tr><tr class="TableStyle-AccessAndAvailability-Body-Body1"><td class="TableStyle-AccessAndAvailability-BodyB-Column1-Body1"><p><b>Available to:</b></p></td><td class="TableStyle-AccessAndAvailability-BodyA-Column2-Body1"><p>Commander Roles of Superuser and Enterprise Admin; Administrator Access Rights</p></td></tr></tbody></table><ol><li value="1">From the Inventory tree, select a cloud account.</li><li value="2">Select <b>Actions</b> &gt; <b>Retrieve Billing Data</b>.
                
            <p>The Billing Data Settings dialog appears. The first column lists all billing accounts associated with this cloud account. The second column lists all projects associated with each billing account, whether or not the project is part of this cloud account.</p><p>If you see the message "To retrieve billing data for this cloud account, you must enable the Cloud Billing API", see <a href="manage-google-cloud-platform.htm#enable-apis" class="MCXref xref">Enable the required APIs</a>.</p></li><li value="3">For <b>Project Containing BigQuery Dataset</b>, select the project where your BigQuery dataset is stored for this billing account.</li><li value="4">Enter the <b>Dataset Name</b>.
            
                <p>You can find the dataset name in the GCP Console. In the following example, the BigQuery dataset is located in Embotics Project X, and the dataset name is <code>embotics_main_billing_export</code>.</p><p><img src="Images/gcp-console-dataset-name.png" title="Locating the Dataset Name in GCP Console" style="max-width: 99%;max-height: auto;" /></p><p>Here's what this example looks like in Commander:</p><p><img src="Images/gcp-retrieve-billing-data.png" title="Configuring GCP Billing Data Retrieval" style="max-width: 99%;max-height: auto;width: auto;height: auto;" /></p></li><li value="5">Click <b>Test</b> to verify that the dataset exists, and that this cloud account has access to it.</li><li value="6"><a name="troubleshoot"></a>If you see the warning "Dataset found, but no billing data can be found in the dataset", this means that no billing data is available in the specified dataset. If you've recently exported billing data to this BigQuery dataset, you can ignore this warning, because it might take a few hours for data to be available from GCP. Commander will retrieve billing data once it's available.</li><li value="7">If you see the error "The dataset 'x' cannot be found. Verify the dataset name and ensure that the service account used to add the selected project's cloud account has access to the dataset", verify that:</li><ul><li>the dataset is located in the selected project</li><li>you have selected the project in the correct cloud account. If the project is visible to multiple cloud accounts, but the dataset isn't accessible to all cloud accounts, you must select the project under the cloud account that has access to the dataset. In the image below, "Embotics Project X" is visible to two cloud accounts, but the <code>embotics_main_billing_export</code> dataset is accessible only to the cloud account named GCP - Embotics Automation, so "Embotics Project X" must be selected under GCP - Embotics Automation.
                    <p><img src="Images/gcp-billing-data-multi-proj.png" title="Selecting the Project in the Correct Managed System" style="max-width: 99%;max-height: auto;" /></p></li></ul><li value="8">Repeat steps 3-4 for each billing account that contains data you want to retrieve.</li><li value="9">Click <b>OK</b> to close the dialog and retrieve billing data.
            <p class="Note">If you see an error message, to close the dialog, you must either click <b>Not Configured</b> and <b>OK</b>, or click <b>Cancel</b>.</p></li></ol><h2 id="Disablebillingdataretrieval" data-magellan-target="Disablebillingdataretrieval"><a name="disable"></a>Disable billing data retrieval</h2><table class="TableStyle-AccessAndAvailability" cellspacing="0" cellpadding="3" border="1" style="width: 100%;mc-table-style: url('../Resources/TableStyles/AccessAndAvailability.css');"><col class="TableStyle-AccessAndAvailability-Column-Column1" /><col class="TableStyle-AccessAndAvailability-Column-Column2" /><tr class="TableStyle-AccessAndAvailability-Body-Body1"><td class="TableStyle-AccessAndAvailability-BodyE-Column1-Body1"><p><b>Access:</b></p></td><td class="TableStyle-AccessAndAvailability-BodyD-Column2-Body1"><p>Views &gt; Inventory &gt; Infrastructure or Applications</p></td></tr><tr class="TableStyle-AccessAndAvailability-Body-Body1"><td class="TableStyle-AccessAndAvailability-BodyE-Column1-Body1"><p><b>Available to:</b></p></td><td class="TableStyle-AccessAndAvailability-BodyD-Column2-Body1"><p>Commander Roles of Superuser and Enterprise Admin; Administrator Access Rights</p></td></tr></table><ol><li value="1">From the Inventory tree, select a GCP cloud account for which you want to stop retrieving billing data.</li><li value="2">Select <b>Actions</b> &gt; <b>Retrieve Billing Data</b>.
</li><li value="3">In the GCP Billing Data Settings dialog, for each billing account that you want to disable, select <b>Not Configured</b> and click <b>OK</b>.
            <p>Commander will no longer retrieve billing data for this billing account. </p></li></ol><p>If other GCP cloud accounts share this billing account, billing data retrieval will also be disabled for those cloud accounts.</p></div><div><div style="border-top-color: rgb(245, 245, 245); border-top-style: none; border-top-width: 1px; margin-top: 22px;"><br /><div class="buttons popup-container clearfix topicToolbarProxy _Skins_ToolbarSnowDocsBottomLeft mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic;"><div class="button-group-container-left"><button class="button needs-pie previous-topic-button" title="Previous Topic" disabled="true"><div><div role="img" class="button-icon-wrapper" aria-label="Previous Topic"><div class="button-icon"> </div></div></div></button></div></div><div class="buttons popup-container clearfix topicToolbarProxy _Skins_ToolbarSnowDocsBottomRight mc-component nocontent" style="mc-topic-toolbar-items: NextTopic;"><div class="button-group-container-left"><button class="button needs-pie next-topic-button" title="Next Topic" disabled="true"><div><div role="img" class="button-icon-wrapper" aria-label="Next Topic"><div class="button-icon"> </div></div></div></button></div></div><p>&#160;</p><div style="border-top-color: rgb(245, 245, 245); border-top-style: solid; border-top-width: 1px; margin-top: 22px;"><p>&#160;</p></div><p class="footer-logo">Snow Commander <span class="mc-variable General.VersionShort variable">9.6</span> documentation</p><p class="footer-logo"><img src="../Resources/Images/copyright-regular-8.svg" /> <span class="mc-variable General.Year variable">2024</span> <span class="mc-variable General.CompanyName variable">Snow Software</span>&#160;&#160;&#160;Last modified: <span class="mc-variable General.ISOShortDate variable">2024-05-21</span>&#160;&#160;&#160;<span style="color: #FFF;" class="mc-variable System.ShortTime variable">7:04 PM</span></p><p class="footer-logo"><a class="footer-links-herschel" href="https://www.snowsoftware.com/legal/termsofuse" target="_blank" data-mc-conditions="General.ForWebOnly">Terms of use</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://www.snowsoftware.com/seo/legal-privacy-policy" target="_blank" data-mc-conditions="General.ForWebOnly">Privacy policy</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://www.snowsoftware.com/legal/dataprotection" target="_blank">Data protection</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://go.snowsoftware.com/subscription-center.html" target="_blank">Subscription&#160;center</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="https://community.snowsoftware.com/s" target="_blank">Community</a>&#160;&#160;&#160;<a class="footer-links-herschel" href="mailto:docsportal-feedback@snowsoftware.com" target="_blank">Docs Feedback</a></p><p><span class="hide-when-mobile"><span style="color: #ffffff;" class="mc-variable System.ShortDate variable">5/21/2024</span>&#160;&#160;<span style="color: #ffffff;" class="mc-variable System.ShortTime variable">7:04 PM</span>&#160;&#160;<span style="color: #ffffff;" class="mc-variable General.Version variable">9.6.3</span></span></p></div></div></div>
                                        <div class="column2">
                                            <div data-sticky-container="" id="A0JROggtwEeMAjo0X1Odww">
                                                <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="A0JROggtwEeMAjo0X1Odww:top" data-bottom-anchor="contentBody:bottom" data-scroll-container=".body-container" data-sticky-on="only screen and (min-width: 901px)" data-scroll-container-on="only screen and (min-width: 901px)">
                                                    <ul data-magellan="" data-animation-duration="250" data-active-class="selected" data-scroll-container=".body-container" data-scroll-container-on="only screen and (min-width: 901px)" class="nocontent menu _Skins_SideMenuWithInThisTopicColumn mc-component">
                                                        <li><a href="#RetrieveGCPBillingData">Retrieve GCP Billing Data</a>
                                                        </li>
                                                        <ul>
                                                            <li><a href="#Aboutbillingdataretrieval">About billing data retrieval</a>
                                                            </li>
                                                            <li><a href="#Overviewofsteps">Overview of steps</a>
                                                            </li>
                                                            <li><a href="#ExportbillingdatatoBigQuery">Export billing data to BigQuery</a>
                                                            </li>
                                                            <li><a href="#EnabletheCloudBillingAPI">Enable the Cloud Billing API</a>
                                                            </li>
                                                            <li><a href="#GrantdatasetpermissionstotheCommanderserviceaccount">Grant dataset permissions to the Commander service account</a>
                                                            </li>
                                                            <li><a href="#ConfiguretheDefaultOwnershippolicy">Configure the Default Ownership policy</a>
                                                            </li>
                                                            <li><a href="#RetrieveGCPbillingdata">Retrieve GCP billing data</a>
                                                            </li>
                                                            <li><a href="#Disablebillingdataretrieval">Disable billing data retrieval</a>
                                                            </li>
                                                        </ul>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="scrollup" style="margin-bottom: 0px; margin-left: 17px;"><a id="scrollup" style="cursor: pointer;">Scroll</a>
                                    </p>
                                    <p>
                                        <!-- This referenced snippet allows an alt text statement to be included for the logo/go-home button on the top of each page -->
                                        <script>/*<![CDATA[*/$(document).ready(function(){
   $('a.logo').attr({
     alt: 'Snow Docs Home',
     title: 'Snow Docs Home'
   });
});/*]]>*/</script>
                                    </p>
                                    <script type="text/javascript">/*<![CDATA[*/if ($(".sticky-menu > ul").children("ul").length == 0){
        $(".sticky-menu > ul").css("visibility", "hidden");
    }/*]]>*/</script>
                                    <script defer="defer" src="../Resources/Scripts/scroll_to_top_left_nav.js" type="text/javascript">
                                    </script>
                                    <script type="text/javascript">/*<![CDATA[*/$("#home-link").prependTo("div.MCBreadcrumbsBox_SnowDocs_0");/*]]>*/</script>
                                    <script type="text/javascript" src="../Resources/Scripts/fa_ext_link.js">
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>